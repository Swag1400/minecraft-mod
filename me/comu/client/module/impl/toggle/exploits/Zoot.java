package me.comu.client.module.impl.toggle.exploits;

import me.comu.api.event.Listener;
import me.comu.api.minecraft.helper.PlayerHelper;
import me.comu.client.events.MotionUpdateEvent;
import me.comu.client.module.ModuleType;
import me.comu.client.module.ToggleableModule;
import me.comu.client.properties.Property;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.potion.Potion;

public final class Zoot extends ToggleableModule
{
    private final Property<Boolean> visuals = new Property<>(true, "Visuals", "visual", "v"), potions = new Property<>(true, "Potions", "potion", "p"), fire = new Property<>(true, "Fire", "f");

    private final Potion[] effects = {Potion.moveSlowdown, Potion.digSlowdown, Potion.harm, Potion.hunger, Potion.weakness,
                                      Potion.poison, Potion.wither
                                     };

    public Zoot()
    {
        super("Zoot", new String[] {"zoot", "firion","antifire"}, 0xFFFF263C, ModuleType.EXPLOITS);
        this.offerProperties(potions, visuals, fire);
        this.listeners.add(new Listener<MotionUpdateEvent>("firion_motion_update_listener")
        {
            @Override
            public void call(MotionUpdateEvent event)
            {
                if (visuals.getValue())
                {
                    if (minecraft.thePlayer.isPotionActive(Potion.blindness))
                    {
                        minecraft.thePlayer.removePotionEffect(Potion.blindness.id);
                    }

                    if (minecraft.thePlayer.isPotionActive(Potion.confusion))
                    {
                        minecraft.thePlayer.removePotionEffect(Potion.confusion.id);
                    }
                }

                if (minecraft.thePlayer.onGround && !PlayerHelper.isInLiquid() && !PlayerHelper.isOnLiquid() && !PlayerHelper.isInsideBlock())
                {
                    if (potions.getValue())
                    {
                        for (Potion effect : effects)
                        {
                            if (minecraft.thePlayer.isPotionActive(effect))
                            {
                                for (int index = 0; index <= 20; index++)
                                {
                                    minecraft.func_175102_a().addToSendQueue(new C03PacketPlayer(minecraft.thePlayer.onGround));
                                }
                            }
                        }
                    }

                    if (fire.getValue() && minecraft.thePlayer.isBurning() && !minecraft.thePlayer.isPotionActive(Potion.fireResistance))
                    {
                        for (int index = 0; index <= 20; index++)
                        {
                            minecraft.func_175102_a().addToSendQueue(new C03PacketPlayer(minecraft.thePlayer.onGround));
                        }
                    }
                }
            }
        });
    }
}
