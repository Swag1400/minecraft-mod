package me.comu.client.module.impl.toggle.exploits;

import me.comu.api.event.Listener;
import me.comu.api.minecraft.helper.PlayerHelper;
import me.comu.client.events.PacketEvent;
import me.comu.client.module.ModuleType;
import me.comu.client.module.ToggleableModule;
import net.minecraft.entity.Entity;
import net.minecraft.util.BlockPos;
import net.minecraft.util.EnumFacing;

public final class ItemSpoof extends ToggleableModule {
    private boolean send;
    private Entity entity;

    public BlockPos position;
    public EnumFacing placedBlockDirection;
    public PlayerHelper.EnumHand hand;
    public float facingX;
    public float facingY;
    public float facingZ;

    public ItemSpoof() {
        super("ItemSpoof", new String[]{"itemspoof", "spoof", "is"}, 0xFFF0AF81, ModuleType.EXPLOITS);
        this.listeners.add(new Listener<PacketEvent>("item_spoof_motion_update_listener") {
            @Override
            public void call(PacketEvent event) {
//                    if (event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock) {
//                        if (send) {
//                            send = false;
//                            return;
//                        }
//                        final CPacketPlayerTryUseItemOnBlock packet = (CPacketPlayerTryUseItemOnBlock) event.getPacket();
//                        position = packet.getPos();
//                        placedBlockDirection = packet.getDirection();
//                        hand = packet.getHand();
//                        facingX = packet.getFacingX();
//                        facingY = packet.getFacingY();
//                        facingZ = packet.getFacingZ();
//
//                        if (position != null) {
//                            event.setCanceled(true);
//                            final Minecraft minecraft = Minecraft.getMinecraft();
//                            minecraft.playerController.windowClick(minecraft.thePlayer.inventoryContainer.windowId, 9, minecraft.thePlayer.inventory.currentItem, 2, minecraft.thePlayer);
//                            send = true;
//                            Helper.sendPacket(new CPacketPlayerTryUseItemOnBlock(position, placedBlockDirection, hand, facingX, facingY, facingZ));
//                            minecraft.playerController.windowClick(minecraft.thePlayer.inventoryContainer.windowId, 9, minecraft.thePlayer.inventory.currentItem, 2, minecraft.thePlayer);
//                        }
//                    }
//                    if (event.getPacket() instanceof CPacketPlayerTryUseItem) {
//                        if (send) {
//                            send = false;
//                            return;
//                        }
//                        final CPacketPlayerTryUseItem packet = (CPacketPlayerTryUseItem) event.getPacket();
//                        hand = packet.getHand();
//
//                        if (hand != null) {
//                            event.setCanceled(true);
//                            final Minecraft minecraft = Minecraft.getMinecraft();
//                            minecraft.playerController.windowClick(minecraft.thePlayer.inventoryContainer.windowId, 9, minecraft.thePlayer.inventory.currentItem, 2, minecraft.thePlayer);
//                            send = true;
//                            Helper.sendPacket(new CPacketPlayerTryUseItem(hand));
//                            minecraft.playerController.windowClick(minecraft.thePlayer.inventoryContainer.windowId, 9, minecraft.thePlayer.inventory.currentItem, 2, minecraft.thePlayer);
//                        }
//                    }
//                    if (event.getPacket() instanceof C02PacketUseEntity) {
//                        if (send) {
//                            send = false;
//                            return;
//                        }
//                        final C02PacketUseEntity packet = (C02PacketUseEntity) event.getPacket();
//                        if (packet.getAction() == C02PacketUseEntity.Action.ATTACK) {
//
//                            entity = packet.getEntityFromWorld(minecraft.theWorld);
//
//                            if (entity != null) {
//                                event.setCanceled(true);
//                                minecraft.playerController.windowClick(minecraft.thePlayer.inventoryContainer.windowId, 9, minecraft.thePlayer.inventory.currentItem, 2, minecraft.thePlayer);
//                                send = true;
//                                Helper.sendPacket(new C02PacketUseEntity(entity, C02PacketUseEntity.Action.ATTACK));
//                                minecraft.playerController.windowClick(minecraft.thePlayer.inventoryContainer.windowId, 9, minecraft.thePlayer.inventory.currentItem, 2, minecraft.thePlayer);
//                            }
//                        }
//                    }

            }

        });

    }


}
