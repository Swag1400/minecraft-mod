package me.comu.client.module.impl.toggle.exploits;

import me.comu.api.event.Listener;
import me.comu.client.events.MotionUpdateEvent;
import me.comu.client.module.ModuleType;
import me.comu.client.module.ToggleableModule;
import me.comu.client.properties.Property;
import net.minecraft.client.Minecraft;
import net.minecraft.client.entity.EntityOtherPlayerMP;
import net.minecraft.client.network.NetworkPlayerInfo;
import net.minecraft.entity.Entity;
import net.minecraft.util.StringUtils;

public class FakeHack extends ToggleableModule {

    private Property<Boolean> sneak = new Property<>(false, "Sneak", "shift");

    public FakeHack() {
        super("FakeHacker", new String[]{"FakeHacker", "fakehack", "fh", "frame"}, 0xFFFFB600, ModuleType.EXPLOITS);
        this.offerProperties(sneak);
        this.listeners.add(new Listener<MotionUpdateEvent>("fake_hack_packet_listener") {
            public void call(MotionUpdateEvent event) {
                for (Object o : minecraft.func_175102_a().func_175106_d()) {
                    if (sneak.getValue()) {
                        String mcname = StringUtils.stripControlCodes(((NetworkPlayerInfo) o).func_178845_a().getName());
                        Entity entity = Minecraft.getMinecraft().theWorld.getPlayerEntityByName(mcname);
                        if (entity != null && entity != Minecraft.getMinecraft().thePlayer) {
                            entity.setSneaking(true);
                        }
                        if (!isRunning()) {
                            entity.setSneaking(false);
                        }
                    }
                }


            }
        });


    }


}



/*Entity entity = Minecraft.getMinecraft().theWorld.getPlayerEntityByName("Comu101");
     if (entity != null && entity != Minecraft.getMinecraft().thePlayer) {

         entity.setSneaking(true);
     }
*/

